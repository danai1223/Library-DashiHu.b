--// DashiHub Lightweight UI Library
--// Stable • Mobile • Executor Friendly

local Library = {}

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

local function tween(obj, props, time)
    TweenService:Create(
        obj,
        TweenInfo.new(time or 0.2, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
        props
    ):Play()
end

--// WINDOW
function Library:CreateWindow(cfg)
    local Window = {}
    cfg = cfg or {}

    local gui = Instance.new("ScreenGui")
    gui.Name = "DashiHubUI"
    gui.ResetOnSpawn = false
    gui.Parent = LocalPlayer:WaitForChild("PlayerGui")

    -- Open Button
    local openBtn = Instance.new("TextButton", gui)
    openBtn.Size = UDim2.fromOffset(48,48)
    openBtn.Position = UDim2.fromScale(0.03,0.5)
    openBtn.Text = "≡"
    openBtn.Font = Enum.Font.GothamBold
    openBtn.TextSize = 24
    openBtn.BackgroundColor3 = Color3.fromRGB(0,140,255)
    openBtn.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", openBtn).CornerRadius = UDim.new(1,0)

    -- Main Frame
    local main = Instance.new("Frame", gui)
    main.AnchorPoint = Vector2.new(0.5,0.5)
    main.Position = UDim2.fromScale(0.5,0.5)
    main.Size = UDim2.fromScale(0,0)
    main.BackgroundColor3 = Color3.fromRGB(18,18,22)
    main.Visible = false
    Instance.new("UICorner", main).CornerRadius = UDim.new(0,16)

    -- Header
    local header = Instance.new("TextLabel", main)
    header.Size = UDim2.new(1,-60,0,46)
    header.Position = UDim2.fromOffset(16,0)
    header.BackgroundTransparency = 1
    header.Text = cfg.Title or "DashiHub"
    header.Font = Enum.Font.GothamBold
    header.TextSize = 20
    header.TextXAlignment = Left
    header.TextColor3 = Color3.fromRGB(0,150,255)

    -- Close
    local close = Instance.new("TextButton", main)
    close.Size = UDim2.fromOffset(36,36)
    close.Position = UDim2.new(1,-42,0,5)
    close.Text = "✕"
    close.Font = Enum.Font.GothamBold
    close.TextSize = 18
    close.BackgroundColor3 = Color3.fromRGB(200,60,60)
    close.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", close).CornerRadius = UDim.new(1,0)

    -- Body
    local body = Instance.new("Frame", main)
    body.Position = UDim2.fromOffset(0,46)
    body.Size = UDim2.new(1,0,1,-46)
    body.BackgroundTransparency = 1

    -- Sidebar
    local side = Instance.new("Frame", body)
    side.Size = UDim2.fromScale(0.25,1)
    side.BackgroundColor3 = Color3.fromRGB(12,12,15)
    Instance.new("UICorner", side).CornerRadius = UDim.new(0,12)

    local sideLayout = Instance.new("UIListLayout", side)
    sideLayout.Padding = UDim.new(0,6)

    -- Content
    local content = Instance.new("Frame", body)
    content.Position = UDim2.fromScale(0.27,0)
    content.Size = UDim2.fromScale(0.73,1)
    content.BackgroundTransparency = 1

    local Tabs = {}

    -- Open / Close
    openBtn.MouseButton1Click:Connect(function()
        main.Visible = true
        openBtn.Visible = false
        tween(main,{Size=UDim2.fromScale(0.75,0.75)},0.25)
    end)

    close.MouseButton1Click:Connect(function()
        tween(main,{Size=UDim2.fromScale(0,0)},0.25)
        task.wait(0.25)
        main.Visible = false
        openBtn.Visible = true
    end)

    --// TAB
    function Window:CreateTab(name)
        local Tab = {}

        local btn = Instance.new("TextButton", side)
        btn.Size = UDim2.new(1,0,0,38)
        btn.Text = name
        btn.Font = Enum.Font.Gotham
        btn.TextSize = 15
        btn.TextColor3 = Color3.fromRGB(180,180,180)
        btn.BackgroundTransparency = 1

        local frame = Instance.new("ScrollingFrame", content)
        frame.Size = UDim2.fromScale(1,1)
        frame.CanvasSize = UDim2.new(0,0,0,0)
        frame.ScrollBarThickness = 5
        frame.AutomaticCanvasSize = Y
        frame.Visible = false
        frame.BackgroundTransparency = 1

        local layout = Instance.new("UIListLayout", frame)
        layout.Padding = UDim.new(0,8)

        btn.MouseButton1Click:Connect(function()
            for _,t in pairs(Tabs) do
                t.Frame.Visible = false
                t.Button.TextColor3 = Color3.fromRGB(180,180,180)
            end
            frame.Visible = true
            btn.TextColor3 = Color3.fromRGB(0,150,255)
        end)

        table.insert(Tabs,{Button=btn,Frame=frame})
        if #Tabs == 1 then
            frame.Visible = true
            btn.TextColor3 = Color3.fromRGB(0,150,255)
        end

        local function Card(h)
            local c = Instance.new("Frame", frame)
            c.Size = UDim2.new(1,-10,0,h)
            c.BackgroundColor3 = Color3.fromRGB(24,24,28)
            Instance.new("UICorner", c).CornerRadius = UDim.new(0,10)
            return c
        end

        -- TOGGLE
        function Tab:AddToggle(cfg)
            local c = Card(38)
            local state = cfg.Default or false

            local txt = Instance.new("TextLabel", c)
            txt.Text = cfg.Text
            txt.Font = Enum.Font.Gotham
            txt.TextSize = 13
            txt.TextColor3 = Color3.new(1,1,1)
            txt.BackgroundTransparency = 1
            txt.Position = UDim2.fromOffset(12,0)
            txt.Size = UDim2.new(0.6,0,1,0)
            txt.TextXAlignment = Left

            local sw = Instance.new("Frame", c)
            sw.Size = UDim2.fromOffset(40,18)
            sw.Position = UDim2.new(1,-52,0.5,-9)
            sw.BackgroundColor3 = state and Color3.fromRGB(0,140,255) or Color3.fromRGB(70,70,70)
            Instance.new("UICorner", sw).CornerRadius = UDim.new(1,0)

            local knob = Instance.new("Frame", sw)
            knob.Size = UDim2.fromOffset(16,16)
            knob.Position = state and UDim2.fromOffset(22,1) or UDim2.fromOffset(2,1)
            knob.BackgroundColor3 = Color3.fromRGB(230,230,230)
            Instance.new("UICorner", knob).CornerRadius = UDim.new(1,0)

            c.InputBegan:Connect(function(i)
                if i.UserInputType == MouseButton1 or i.UserInputType == Touch then
                    state = not state
                    tween(sw,{BackgroundColor3=state and Color3.fromRGB(0,140,255) or Color3.fromRGB(70,70,70)})
                    tween(knob,{Position=state and UDim2.fromOffset(22,1) or UDim2.fromOffset(2,1)})
                    if cfg.Callback then cfg.Callback(state) end
                end
            end)
        end

        -- BUTTON
        function Tab:AddButton(cfg)
            local c = Card(38)
            local b = Instance.new("TextButton", c)
            b.Size = UDim2.new(1,0,1,0)
            b.Text = cfg.Text
            b.Font = Enum.Font.Gotham
            b.TextSize = 13
            b.TextColor3 = Color3.new(1,1,1)
            b.BackgroundTransparency = 1
            b.MouseButton1Click:Connect(function()
                if cfg.Callback then cfg.Callback() end
            end)
        end

        return Tab
    end

    return Window
end

return Library
